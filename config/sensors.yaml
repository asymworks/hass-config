#### Sensor Definitions #######################################################

# Weather prediction
- platform: darksky
  api_key: !secret darksky_api_key
  monitored_conditions:
    - summary
    - icon
    - temperature

# Bluetooth Presence (JPK Nexus 5X)
- platform: mqtt
  name: monitor_entry_jp_n5x
  state_topic: !secret monitor_entry_jp_n5x_topic
  value_template: '{{ value_json.confidence }}'
  unit_of_measurement: '%'
  
# Home Occupancy Confidence (JPK Nexus 5X)
- platform: min_max
  name: home_occupancy_confidence_jpk
  type: max
  round_digits: 0
  entity_ids:
    - sensor.monitor_entry_jp_n5x

# TP-Link Smart Plugs
- platform: template
  sensors:
    tplink_media_center_amps:
      friendly_name_template: "{{ states.switch.tplink_media_center.name }}"
      value_template: '{{ states.switch.tplink_media_center.attributes["current_a"] | float }}'
      unit_of_measurement: 'A'
    tplink_media_center_watts:
      friendly_name_template: "{{ states.switch.tplink_media_center.name }}"
      value_template: '{{ states.switch.tplink_media_center.attributes["current_power_w"] | float }}'
      unit_of_measurement: 'W'
    tplink_media_center_volts:
      friendly_name_template: "{{ states.switch.tplink_media_center.name }}"
      value_template: '{{ states.switch.tplink_media_center.attributes["voltage"] | float }}'
      unit_of_measurement: 'V'

